# 4장. 함수 컴포넌트와 리액트 훅

## 📚 목차

1. 처음 만나는 리액트 훅
2. useMemo와 useCallback 훅 이해하기
3. useState 훅 이해하기
4. useEffect와 useLayoutEffect 훅 이해하기
5. useRef와 useImperativeHandle 훅 이해하기
6. useContext 훅 이해하기

---

### 🔍 처음 만나는 리액트 훅

- #### 리액트 훅이란?

  리액트 훅은 'use'라는 접두사가 이름에 들어가는 일련의 함수입니다.  
  리액트 훅 함수는 반드시 함수 컴포넌트에서만 사용해야 합니다.  
  리액트 훅의 종류는 아래의 표와 같습니다.
  <table>
    <tr>
      <th>용도</th>
      <th>훅</th>
    </tr>
    <tr>
      <td rowspan="4">컴포넌트 데이터 관리</td>
      <td>useMemo</td>
    </tr>
    <tr>
      <td>useCallback</td>
    </tr>
    <tr>
      <td>useState</td>
    </tr>
    <tr>
      <td>useReducer</td>
    </tr>

    <tr>
      <td rowspan="2">컴포넌트 생명 주기 대응</td>
      <td>useEffect</td>
    </tr>
    <tr>
      <td>useLayoutEffect</td>
    </tr>

    <tr>
      <td rowspan="2">컴포넌트 메시지 호출</td>
      <td>useRef</td>
    </tr>
    <tr>
      <td>useImperativeHandle</td>
    </tr>

    <tr>
      <td>컴포넌트 간의 정보 공유</td>
      <td>useContext</td>
    </tr>
  </table>

- #### 리액트 훅 코드 패턴과 의존성 목록

  | 매개변수 개수 | 훅 함수                                                      |
  | :-----------: | ------------------------------------------------------------ |
  |      1개      | useState, useRef, useImperativeHandle, useContext            |
  |      2개      | useMemo, useCallback, useReducer, useEffect, useLayoutEffect |

  - #### 매개변수가 1개인 훅 함수의 코드 패턴

    > 훅 함수<값의 타입|null>(값)

    ```javascript
    // useRef 훅 사용 예
    const today: Date = useRef < Date > new Date();
    ```

  - #### 매개변수가 2개인 훅 함수의 코드 패턴

    > 훅 함수<값의 타입>(콜백 함수, 의존성 목록)

    여기서 의존성 목록은 콜백 함수에서 사용되는 변수나 함수의 값이 일정하지 않고 수시로 변할 수 있을 때, 해당 변수나 함수를 아이텐으로 갖는 배열을 의미합니다.  
    의존성 목록에 있는 아이템 중 하나라도 변화가 있으면 콜백 함수를 새로 고침해 변한 값을 콜백 함수에 반영해줍니다.  
    의존성 목록이 빈 배열일 때 콜백 함수는 한 번만 실행됩니다.

    ```javascript
    // useEffect 훅 사용 예
    useEffect(() => {}, []);
    ```

- #### useEffect 훅 사용하기

  useEffect 훅의 사용법은 다음과 같습니다.  
  useEffect는 의존성 목록에 있는 조건 중 어느 하나라도 충족되면 그때마다 콜백 함수를 다시 실행합니다.

  > useEffect(콜백 함수, 의존성 목록)
  > 콜백 함수 = () => {}

  컴포넌트가 생성될 때 한번만 실행하게 하려면 의존성 목록을 []로 만들면 됩니다.  
  의존성 목록이 단순히 []일 때 useEffect는 첫 번째 매개변수의 콜백 함수를 한 번만 실행합니다.

  useEffect는 다음처럼 함수를 반환할 수도 있습니다.

  ```javascript
  useEffect(() => {
    //컴포넌트가 생성될 때 실행
    return () => {}; // 컴포넌트가 소멸할 때 한 번 실행
  }, []);
  ```

- #### useRef 훅 사용하기

- #### useState 훅 사용하기

  useState 훅은 다음처럼 사용합니다.  
  useState가 반환하는 세터는 현재 값이 변경되면 자동으로 해당 컴포넌트를 다시 렌더링하는 기능이 있습니다.

  > const [현재 값, 세터] = useState(초깃값)
  > 세터 = (새로운 값) => void

- #### 커스텀 훅이란?

  리액트 훅은 여러 훅 함수를 조합해 마치 새로운 훅 함수가 있는 것처럼 만들 수 있는데, 이렇게 조합한 새로운 훅 함수를 커스텀 훅이라고 합니다.  
  커스텀 훅은 리액트 훅뿐만 아니라 기존에 제작한 커스텀 훅 함수를 사용해서 만들 수도 있스빈다.  
  커스텀 훅 함수는 '훅'이라는 의미를 강조하고자 함수 이름에 'use'라는 접두어를 붙여서 만듭니다.

- #### 리액트 훅 함수의 특징
  - 같은 리액트 훅을 여러 번 호출할 수 있다.
  - 함수 몸통이 아닌 몸통 안 복합 실행문의 {} 안에서 호출할 수 없다.
  - 비동기 함수를 콜백 함수로 사용할 수 없다.

### 🔍 useMemo와 useCallback 훅 이해하기

- #### 리액트 훅의 기본 원리

  - #### 유효 범위

    모든 프로그래밍 언어에서 변수는 유효한 범위가 있습니다.  
    대부분의 프로그래밍 언어에서는 중괄호 {} 안쪽의 범위를 **블록 범위**라고 하고, 블록 범위 안쪽의 변수를 **지역 변수**라고 합니다.  
    지역 변수 개념은 함수 몸통에서도 똑같이 적용됩니다.  
    리액트의 함수 컴포넌트 또한 '함수'이므로 몸통에서 변수의 유효 범위는 똑같이 적용됩니다.

  - #### 상태와 캐시

    프로그래밍 분야에서 **상태**란 용어는 변수의 유효 범위와 무관하게 계속 유지하는 값을 의미합니다.  
    상태는 한 번 설정되면 이후로는 값을 변경할 수 없는 '읽기 전용' 개념을 가진 **불변 상태**와 아무 때나 값을 변경할 수 있고 계속 유지하는 **가변 상태**로 나뉩니다.  
    그런데 함수 컴포넌트는 '함수'이므로 블록 범위라는 개념 때문에 상태를 가질 수 없습니다.  
    함수 컴포넌트가 상태를 가질 수 있는 유일한 방법은 상태를 담은 변수를 함수 몸통 바깥으로 꺼내어 블록 범위의 영향을 받지 않게 하는 것입니다.  
    이처럼 블록 범위 바깥의 변수를 **전역 변수**라고 합니다.  
    리액트 훅은 상태를 가질 수 없는 함수 컴포넌트로 하여금 마치 상태를 가진 것처럼 동작할 수 있게 합니다.  
    그리고 이런 개념을 이용하면 캐시를 전역 변수 형태로 만들어서 구현할 수 있습니다.  
    **캐시**는 데이터나 값을 미리 복사해 놓는 임시 저장소를 의미합니다.  
    캐시는 원본 데이터에 접근하는 시간이 오래 걸리거나 값을 다시 계산하는 시간을 절약하고 싶을 때 주로 사용합니다.

  - #### 캐시와 의존성 목록

  - #### 함수 컴포넌트와 리액트 훅을 사용하는 이유
