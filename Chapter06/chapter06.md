# 6장. 리액트 라우터

## 📚 목차

1. 처음 만나는 리액트 라우터
2. Outlet 컴포넌트와 중첩 라우팅
3. 공개 라우트와 비공개 라우트 구현하기

---

### 🔍 처음 만나는 리액트 라우터

리액트 라우터는 사용자가 요청한 URL에 따라 알맞은 자원을 제공하는 기능을 합니다.

- #### URL이란?

  **URL**은 인터넷에서 자원의 위치를 의미합니다. 여기서 자원이란 웹 브라우저가 이해할 수 있는 모든 형태의 데이터를 뜻합니다.
  URL은 웹 브라우저가 특정 웹 서버에 원하는 자원을 요청할 때 사용됩니다.

  > http://localhost:3000/a/b/c/?d=100&e=hello#fgh

  URL은 먼저 `http://`나 `https://`와 같은 통신 프로토콜을 명시하고, 프로토콜 다음에 호스트나 도메인이라고 부르는 웹 서버 이름, 그리고 도메인 다음에 `/`로 시작하는 경로로 구성됩니다. 여기서 포트 번호가 80이 아닐 때는 도메인 뒤에 `:` 기호를 붙이고 포트 번호를 명시합니다. 그리고 `?`로 시작하는 쿼리 매개변수나 `#`로 시작하는 프래그먼트 부분이 있을 수 있습니다.

  - #### location 객체 알아보기

    | location 객체의 속성 | 의미                                                                                            |
    | -------------------- | ----------------------------------------------------------------------------------------------- |
    | href                 | 주소 창에 입력된 URL 전체 문자열을 얻고 싶거나, 다른 URL을 프로그래밍으로 설정하고 싶을 때 사용 |
    | protocol             | URL의 프로토콜 문자열을 얻고 싶을 때 사용하며, 마지막의 콜론(:)도 포함                          |
    | host                 | 도메인과 포트 번호가 결합된 문자열을 얻고 싶을 때 사용                                          |
    | pathname             | `/` 문자 뒤 경로 부분의 문자열을 얻고 싶을 때 사용                                              |
    | search               | 쿼리 매개변수 문자열을 얻고 싶을 때 사용                                                        |
    | hash                 | 프래그먼트 문자열을 얻고 싶을 때 사용                                                           |

  - #### 웹 브라우저가 제공하는 history 객체 알아보기

    | location 객체의 메서드 | 의미                                                                                   |
    | ---------------------- | -------------------------------------------------------------------------------------- |
    | back()                 | 뒤로 가기를 프로그래밍으로 하려 할 때 사용                                             |
    | forward()              | 앞으로 가기를 프로그래밍으로 하려 할 때 사용                                           |
    | go(숫자 혹은 URL)      | go(-1)은 뒤로 가기에 해당하고, go(1)은 앞으로 가기에 해당 go(2)는 2번 뒤로 가기에 해당 |

  - #### 라우팅이란?

    웹 서버에서 URL에 명시된 자원을 찾는 과정을 **라우팅**이라고 합니다.  
    보통 웹에서 라우팅은 항상 서버에서 일어납니다. 그런데 앞서 알아본 location과 history 객체의 기능으로 실제로는 라우팅이 웹 브라우저, 즉 클라이언트에서 일어나지만 사용자 관점에서는 서버 쪽 라우팅과 똑같은 사용자 경험을 줄 수 있습니다.  
    이처럼 웹 브라우저에서 발생하는 라우팅을 **클라이언트 측 라우팅**이라고 합니다.

  - #### SPA 방식 웹 앱의 특징
    웹 서버와 웹 브라우저가 여러 HTML 파일을 주고받는 방식을 다중 페이지 앱, MPA라고 합니다. 반면에 라우팅이 웹 브라우저에서만 일어나는 웹 방식을 단일 페이지 앱, SPA라고 합니다.  
    SPA 방식 웹 앱은 사용자가 처음 서버에 접속할 때 다양한 컴포넌트들로 구성된 1개의 HTML 파일을 웹 브라우저에 전송합니다. 그리고 이 HTML 파일에 포함된 자바스크립트 코드가 동작하면서 사용자가 원하는 내용을 DOM 구조로 만들어 가면서 보여줍니다.  
    SPA 방식 웹 앱에서 클라이언트 측 라우팅(CSR)은 수많은 컴포넌트를 찾아 화면에 보여줍니다. 또한 CSR은 프로그래밍으로 URL을 입력하지만 실제 서버에 전송하는 URL이 아니므로 사용자가 보고 있는 컴포넌트가 바뀌어도 화면 새로고침이 발생하지 않습니다.

- #### 리액트 라우터 패키지란? Route 컴포넌트 알아보기

  리액트 라우터 또한 컨텍스트 기반으로 설계되었으므로 컨텍스트 제공자인 BrowserRouter를 최상위 컴포넌트로 사용해야 합니다.  
  Route 컴포넌트는 단독으로 사용할 수 없고 항상 Routes 컴포넌트의 자식 컴포넌트로 사용해야 합니다.  
  만일 Route 컴포넌트가 `component={Home}`처럼 사용하도록 설계했다면 라우트 경로에 맞는 컴포넌트가 제공하는 속성을 사용할 수 없지만, element는 `element={<Home title="hello"}` 형태로 컴포넌트의 속성에 적절한 값을 설정할 수 있습니다.

- #### Link 컴포넌트 알아보기

  HTML에서 다른 웹 사이트로 이동하거나 특정 경로의 내용을 보려면 `<a href="다른_사이트_url>` 요소를 사용합니다.  
  다만 `<a>` 요소는 클라이언트 측 라우팅을 위한 용도로는 바로 사용할 수 없습니다. 이 때문에 리액트 라우터는 `<a>` 요소를 감싼 Link 컴포넌트를 제공합니다.  
  Link 컴포넌트는 `<a>` 요소의 href 속성 대신 to 속성을 제공합니다.

- #### useNavigate 훅 알아보기

  useNavigate 훅을 호출하면 navigate 함수를 얻을 수 있는데, 이 함수는 매개변수로 전달한 경로로 이동하게 해줍니다.

- #### 라우트 변수란?

  라우트를 설정할 때 라우트 경로는 콜론(:)을 붙일 수 있는데, 콜론을 앞에 붙인 심볼을 **라우트 변수**라고 합니다.  
  라우트 변수는 라우트 경로의 일정 부분이 수시로 바뀔 때 사용합니다.

- #### 리액트 라우터 훅 알아보기

  - #### useLocation 훅 알아보기

    useLocation 훅은 location 객체를 반환하는데, 이 객체는 웹 브라우저가 기본적으로 제공하는 window.location과 개념적으로 비슷하나 완전히 똑같지는 않습니다.

  - #### useParams 훅 알아보기

    useParams 훅은 params 객체를 반환하는데, 이 객체로부터 라우트 매개변숫값을 얻습니다.

  - #### useSearchParams 훅 알아보기
    useSearchParams 훅은 searchParams 객체와 setSearchParams 세터 함수를 튜플 형태로 반환합니다.

### 🔍 Outlet 컴포넌트와 중첩 라우팅

- #### 리액트 라우터의 Outlet 컴포넌트

  내비게이션 메뉴를 만들려고 하면 모든 라우트 컴포넌트마다 거의 똑같은 코드를 작성해야 합니다. 리액트 라우터는 이런 번거로움을 줄이고자 Outlet이란 컴포넌트를 제공합니다.  
  Outlet 컴포넌트는 다른 컴포넌트들이 렌더링되는 위치를 지정해 주는 역할을 합니다. 따라서 Outlet에 보이기 원하는 컴포넌트는 Outlet을 사용하는 컴포넌트의 자식 라우터로 구성합니다.  
  리액트에서 부모 컴포넌트는 자식 컴포넌트 안에서 렌더링될 수 없습니다. 또한 형제 컴포넌트가 다른 형제 컴포넌트 안에서 렌더링 될 수도 없습니다. 따라서 Outlet 안에서 렌더링되려면 라우터 설정은 부모/자식 관게의 라우팅, 즉 **중접 라우팅** 형태로 설정해야 합니다.

  - #### 색인 라우트 알아보기
    Route 컴포넌트는 index란 이름의 boolean 타입 속성을 제공하는데, `<Route index/>` 형태로 사용하는 Route를 색인 라우트라고 합니다.  
    색인 라우트는 경로가 `/`일 때 Outlet에 자동으로 기본 컴포넌트를 나타나게 합니다.
